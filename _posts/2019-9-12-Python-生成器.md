---
layout:     post
title:      Python 生成器
subtitle:   
date:       2019-9-12
author:     Tangle
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - Python
---

![](https://img2018.cnblogs.com/blog/1532318/201903/1532318-20190323232621241-1721430520.jpg)

普通生成器

```Python
g = (x for x in range(5))
# g现在就是一个生成器
print(g) # <generator object <genexpr> at 0x0000029DA3E114F8>
# 每打印一次返回一个元素的值直到计算最后一个元素的值
print(next(g))
# 也可以使用for循环
for i in g:
    print(i) # 0 1 2 3 4
```

函数生成器

```Python
def fib(max):
    n,a,b= 0,0,1
    while n < max:
        yield b
        a,b= b,a+b
        n+= 1
    return 'done'
g=fib(5)
print(g) # <generator object fib at 0x000002441FF724F8>
for i in g:
    print(i) # 1 1 2 3 5
```

# next

| 语法             |
| :--------------- |
| next(可迭代对象) |

# send

```Python
import time
def consumer(name):
    print("%s 准备吃包子啦!" % name)
    while True:
        baozi= yield
        print("包子[%s]来了,被[%s]吃了!" % (baozi, name))
def producer(name):
    c= consumer('A')
    c2= consumer('B')
    # 调用生成器
    next(c)
    # 调用生成器
    next(c2)
    print("%s,老子开始准备做包子啦!"%name)
    for i in range(10):
        time.sleep(0.5)
        print("做了2个包子!")
        # 继续调用生成器并把值赋给第一次调用的yield
        c.send(i)
        # 继续调用生成器并把值赋给第一次调用的yield
        c2.send(i)
# 调用priducer函数
producer("Tangle")
```
