---
layout:     post
title:      Python 反射
subtitle:   
date:       2019-9-12
author:     Tangle
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - Python
---

# 获取成员

| 语法                      | 作用           |
| ------------------------- | -------------- |
| getattr(类实例, '方法')() | 获取方法并执行 |
| getattr(类实例, '变量')   | 获取变量       |

```python
class foo(object):
    def __init__(self):
        self.name = '233'
    def func(self):
        return '666'
obj = foo()

print(getattr(obj,'name'))
print(getattr(obj,'func')())
```

# 检查成员

| 语法                    | 返回值        | 作用             |
| ----------------------- | ------------- | ---------------- |
| print(类实例.\__dict__) | dict          | 获取类中所有成员 |
| hasattr(类实例,'方法')  | True \| False | 检查方法是否存在 |
| hasattr(类实例,'变量')  | True \| False | 检查变量是否存在 |

```python
class foo(object):
    def __init__(self):
        self.name = '233'
    def func(self):
        return '666'
obj = foo()

print(hasattr(obj,'name'))
print(hasattr(obj,'func'))
```

# 添加成员

| 语法                        | 作用                                     |
| --------------------------- | ---------------------------------------- |
| setattr(类实例,'变量',值)   | 添加或修改变量                           |
| setattr(类实例,'方法',方法) | 添加方法并修改方法名，字符串方法为修改后 |

## 添加变量

```python
class foo(object):
    def __init__(self):
        self.name = '233'
    def func(self):
        return '666'
obj = foo()

setattr(obj,'name',999)
setattr(obj,'age',666)
print(obj.name)
print(obj.age)
```

## 添加方法

```python
def func_demo1(self):
    print("%s"%self.name)

class class_demo(object):
    def __init__(self,name):
        self.name = name

x = class_demo('233')

setattr(x,'func_demo2',func_demo1) # 将 func_demo1 方法添加到实例 x 中，并命名为 func_demo2
x.func_demo2(x) # 调用 func_demo2 方法，因为这是额外添加的方法，需手动传入实例
```

# 删除成员

不能删除方法

| 语法                   | 作用     |
| ---------------------- | -------- |
| delattr(类实例,'变量') | 删除变量 |

```python
class foo(object):
    def __init__(self):
        self.name = '233'
    def func(self):
        return '666'
obj = foo()

delattr(obj, 'name')
```
