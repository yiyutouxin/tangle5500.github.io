---
layout:     post
title:      B站 视频投稿
date:       2020-10-16
author:     Tangle
catalog: true
tags:
    - B站
---

0. <https://gitee.com/nbodyfun/bilibili_video_uploader>
0. <https://gitee.com/tangle5500/bilibili_video_uploader>

# 获取登录Cookies

## 手动获取

查看网站信息 — Cookie — bilibili.com — Cookie
    ```
    SESSDATA
    bili_jct
    ```

## 自动获取

0. <https://github.com/Dawnnnnnn/bilibili-live-tools.git>
0. <https://gitee.com/tangle5500/bilibili-live-tools>

### 保留

```
conf
    bilibili.conf
    user.conf
bilibili.py
configloader.py
login.py
printer.py
run.py
```
```
# run.py

import asyncio
from login import login

loop = asyncio.get_event_loop()
tasks1 = [
    login().login_new()
]
loop.run_until_complete(asyncio.wait(tasks1))
```

### 修改

```
# login.py

t=open(r"conf\cookie.txt","w")            # 添加
t.write(str(dic_saved_session["cookie"])) # 添加
t.close                                   # 添加
Printer().printer(f"登录成功", "Info", "green")
```

# 例子

```
-sd [SESSDATA] # SESSDATA
-bj [bili_jct] # bili_jct
-s [SOURCE]    # 来源声明
-t [TITLE]     # 标题
[video_path]   # 视频文件
```

```
python bilibili_up.py -sd [SESSDATA] -bj [bili_jct] -t [TITLE] -s [SOURCE] [video_path]
```

# ERROR

##  json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

重新获取 `SESSDATA` 和 `bili_jct`

```
Traceback (most recent call last):
  File "D:\Python\bilibili\bilibili_video_uploader\bilibili_up.py", line 397, in <module>
    script_main()
  File "D:\Python\bilibili\bilibili_video_uploader\bilibili_up.py", line 393, in script_main
    ).publish_video(args.video_path, atitle=args.title, adesc=args.desc, acopyright=args.copyright, asource=args.source, specified_type=args.typeid, specified_tags=args.tags)
  File "D:\Python\bilibili\bilibili_video_uploader\bilibili_up.py", line 84, in publish_video
    res1 = self.preupload(filename=filename, filesize=filesize)
  File "D:\Python\bilibili\bilibili_video_uploader\bilibili_up.py", line 274, in preupload
    headers={'TE': 'Trailers'}
  File "D:\Tangle\Python 3.6.5\lib\site-packages\requests\models.py", line 898, in json
    return complexjson.loads(self.text, **kwargs)
  File "D:\Tangle\Python 3.6.5\lib\json\__init__.py", line 354, in loads
    return _default_decoder.decode(s)
  File "D:\Tangle\Python 3.6.5\lib\json\decoder.py", line 339, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "D:\Tangle\Python 3.6.5\lib\json\decoder.py", line 357, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
```
