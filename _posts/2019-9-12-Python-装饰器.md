---
layout:     post
title:      Python 装饰器
subtitle:   
date:       2019-9-12
author:     Tangle
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - Python
---

# 简单的装饰器

```python
# 创建import模块
import time
# 创建计时函数
def show_time(func):
    def a():
        # 开始计时
        start_time= time.time()
        # 执行show_time中参数函数
        func()
        # 结束计时
        end_time = time.time()
        # 计算执行时间
        print('spend %s' % (end_time - start_time))
    # 函数返回值
    return a
# @show_time,下方的函数名=show_time(下方的函数名),show_time是装饰器函数名
@show_time#  foo = show_time(foo)
# 创建被计时函数
def foo():
    time.sleep(1)
    print('hello foo')
foo()
```

# 被装饰的装饰器

```python
import time
def show_time(func):
    def wrapper(*args):
        start_time=time.time()
        func(*args)
        end_time=time.time()
        print('spend %s'%(end_time-start_time))
    return wrapper
@show_time# add=show_time(add)
def add(*args):
    time.sleep(2)
    number=0
    for i in args:
        number+=i
        print(number)
add(2,4,8,6)
```

## 带参数定长装饰器

```python
import time
def time_logger(flag=0):
    def show_time(func):
        def wrapper(*args, **kwargs):
            start_time= time.time()
             func(*args, **kwargs)
             end_time= time.time()
             print('spend %s' % (end_time - start_time))
            if flag==0:
                print('将这个操作的时间记录到日志中')
        return wrapper
    return show_time
@time_logger()# add=time_logger()
def add(*args):
    time.sleep(0.1)
    sum= 0
    for i in args:
        sum+= i
        print(sum)
add(2,7,5,6)
```
