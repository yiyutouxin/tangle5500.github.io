---
layout:     post
title:      Windows 文件同步
date:       2020-9-22
author:     Tangle
catalog: true
tags:
    - Windows
---

# FastCopy

0. 下载 <https://tangle.lanzoui.com/ieFP5gui17c>
0. **源：**
    ```
    C:\test
    ```
0. **目标：**
    ```
    D:\test
    ```
0. 选择**同步(大小/日期)**
0. 执行

# python

```
# -*- coding: UTF-8 -*-

import os
import shutil

src=r"C:\test"        # 源
des=r'C:\test" + '\\' # 目标

def copyRes(src, des):
    cmd = f'xcopy "{src}" "{des}" /s /h /D /y'
    # xcopy "C:\Users\CCG\Desktop\c" "C:\Users\CCG\Desktop\d" /s /h /D /y
    os.system(cmd)

# print('正在复制资源')
copyRes(src, des)
# print('复制完毕')

cnt=0
def delRes(path):
    path2 = path.replace(des, src)
    if os.path.exists(path2):
        return
    if os.path.isdir(path):
        shutil.rmtree(path)
    else:
        os.remove(path)
    global cnt
    cnt+=1
    # print(cnt, path)

# print('正在删除资源')
for root, dirs, files in os.walk(des,topdown=True):
    for dir in dirs:
        delRes(os.path.join(root, dir))
    for file in files:
        delRes(os.path.join(root, file))
# print('删除完毕')
```
