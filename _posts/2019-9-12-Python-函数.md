---
layout:     post
title:      Python 函数
subtitle:   
date:       2019-9-12
author:     Tangle
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - Python
---

# 函数创建

形参是被调用参数，实参是调用参数，形参和实参个数类型要一一对应，如下实例：

```Python
def add(x,y):
    print(x+y)
add(1,1)
```

# 参数优先级顺序

```Python
def a(name,age=12,*args,**kwargs):
    print('name:%s'%name)
    print(age)
    print(args)
    print(kwargs)
a('a',20,'b','c','d',e=1,f=2)
```

结果

```python
name:a
20
('b', 'c', 'd')
{'e': 1, 'f': 2}
```

# 函数返回值

函数里如果没有return，默认返回一个None。

return多个对象，解释器会把多个对象组成一个元组整体输出 。

函数return下面的代码不会执行。

```Python
def a( ):
    return 10,'a',20
    print('666')
print(a())
```

结果

```python
(10, 'a', 20)
```

# 函数特性

函数可以作为参数，可以赋值给变量，也可以作为返回值。

```Python
def c(q):
    return q
def a(n):
    return n+n
def b(d,e):
    # 函数作为返回值
    return e(d),f(1314)
# 函数赋值给变量
f = c
# 函数作为参数
print(b(260,a))
```

结果

```python
(520, 1314)
```

# 函数作用域

| 搜索顺序 | 变量      | 说明                                     |
| :------- | :-------- | :--------------------------------------- |
| 1        | local     | 局部作用域，即函数中定义的变量           |
| 2        | enclosing | 嵌套的父级函数的局部作用域。             |
| 3        | global    | 全局变量，就是模块级别定义的变量         |
| 4        | built-in  | 系统固定模块的变量，比如int，bytearray等 |

作用域声明函数

| 作用域             | 语法            | 作用                 | 声明前                                                         | 声明后                                                 |
| :----------------- | :-------------- | :------------------- | :------------------------------------------------------------- | :----------------------------------------------------- |
| 局部作用域         | global 变量名   | 局部全局变量互相修改 | 局部只能使用全局变量不能修改，全局不可以使用局部内的变量。     | 局部可以修改全局变量，全局不可以修改局部内的变量。     |
| 嵌套函数局部作用域 | global 变量名   | 同上。               | 同上。                                                         | 同上。                                                 |
| 嵌套函数局部作用域 | nonlocal 变量名 | 嵌套函数修改局部变量 | 嵌套函数只能使用局部变量不能修改，局部不可以使用嵌套内的变量。 | 嵌套函数可以修改局部变量，局部不可以使用嵌套内的变量。 |

局部作用域

```Python
gcount = 0
def global_test():
    global gcount
    gcount += 20
    print(gcount)
global_test()
```

嵌套函数局部作用域

``` Python
def make_counter():
    count = 0
    def counter():
         nonlocal count
         count+= 20
         print(count)
    counter()
make_counter()
```

全局变量

```Python
a = 10
```

系统固定模块的变量

```Python
x = int(2.9)
```

# 递归函数

在函数内部，可以调用其他函数，如果一个函数在内部调用自身本身，这个函数就是递归函数。

阶乘

```Python
# for循环
def factorial(n):
    result = n
    for i in range(1, n):
        # 1*2*3*4*5
        result+= i
    return result
print(factorial(5))

# 递归函数
def factorial_new(n):
    if n == 1:
        return 1
    # 5*4*3*2*1
    return n * factorial_new(n - 1)
print(factorial_new(5))
```
斐波那契数列

```Python
# for循环
def fibo(n):
    # 斐波那契数列第1个数字
    before= 0
    # 斐波那契数列第2个数字
    after = 1
    # 循环7次
    for i in range(n - 2):
        current = before + after
        before= after
        after= current
    return current
print(fibo(9))

# 递归函数
def fibo(n):
    if n <= 2:
        # 当前数列
        return n-1
        # 当前数列
    return fibo(n-1)+fibo(n-2)
print(fibo(9))
```

# filter

| 语法      | 参数        |
| :-------- | :---------- |
| filter(,) | 函数名,序列 |

```Python
str = ['a', 'b', 'c', 'd']
def fun1(s):
    if s != 'a':
        return s
# filter可以把函数实参这样执行
ret = filter(fun1,str)
# ret是一个迭代器对象
print(list(ret))
```

# map

| 语法   | 参数        |
| :----- | :---------- |
| map(,) | 函数名,序列 |

```Python
a = ['a','b','c','d']
def fun2(s):
    return s + 'alvin'
# map可以把函数实参这样执行
ret= map(fun2,a)
# ret是一个迭代器
print(ret) # <map object at 0x000001128F9A9358>
print(list(ret)) # ['aalvin', 'balvin', 'calvin', 'dalvin']

def add(x,y):
    return x+y
print (list(map(add, range(10), range(10)))) # [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]
```

# reduce

| 语法       | 参数               |
| :--------- | :----------------- |
| reduce(,,) | 函数名,序列,起始值 |

```Python
# 调用reduce函数必须添加这句话
from functools import reduce
def add1(x, y):
    return x + y
# 1+2+3+4
print(reduce(add1, range(1,5))) # 10
# 1+2+3+4+20
print(reduce(add1, range(1, 5), 20)) # 30
```

# lambda

```Python
# 普通函数
def add(a, b):
    return a + b
print(add(2, 3)) # 5

# 匿名函数
add = lambda a,b : a + b
print(add(2,3)) # 5
```

# 闭包函数

```Python
# 第一层函数
def a(b):
    # 第二层函数
    def c():
        # 在第二层函数调用第一层函数就是闭包
        print(b)
    return c
a(10)() # 10
```
