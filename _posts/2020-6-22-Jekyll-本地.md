---
layout:  post
title:   Jekyll 本地
date:    2020-6-22
author:  Tangle
catalog: true
tags:
    - Jekyll
---

# Ruby

## 安装

0. 浏览 <https://rubyinstaller.org/downloads/>
0. **箭头推荐：**Ruby + Devkit 2.6.6-1（x64）
0. 勾选 `MSYS2 development toolchain 2020-04-03`

## 更改镜像源

```
gem sources -l                             # 查看默认镜像源
gem sources --remove https://rubygems.org/ # 删除默认镜像源
gem sources -a http://gems.ruby-china.com/ # 添加镜像源
```

# 安装 Jekyll

0. cmd
0. gem install jekyll

# GitHub Pages

0. 克隆下自己 Github 上的 Blog
    ```
    git clone https://github.com/username/username.github.io.git
    ```
0. 删除掉下方的 js 文件
    ```
    username.github.io\js\lock.js
    username.github.io\js\lock2.js
    ```

# 解决不能预览中文文件

0. 在 ruby 目录搜索 `filehandler.rb` 文件
0. 在注释处插入代码
    ```
    path = req.path_info.dup.force_encoding(Encoding.find("filesystem"))
    path.force_encoding("UTF-8") # 插入代码
    if trailing_pathsep?(req.path_info)

    break if base == "/"
    base.force_encoding("UTF-8") # 插入代码
    break unless File.directory?(File.expand_path(res.filename + base))
    ```

# 启动服务器

0. cmd
    ```
    jekyll server
    ```
0. 浏览 `127.0.0.1:4000`

## 局域网

0. 防火墙 Ruby 勾选**公用**
0. cmd
    ```shell
    jekyll serve -w --host=0.0.0.0
    ```

# 一键启动服务器

```
rem .bat
cd /d 浏览器根目录
chrome 127.0.0.1:4000
cd /d jekyll项目根目录
jekyll server
```
