---
layout:  post
title:   FFmpeg 选项
date:    2021-3-19
author:  Tangle
catalog: true
tags:
    - FFmpeg
---

# 常用

```
-r 23.976    # 帧率
-s 1920x1080 # 分辨率
```

# 选择流

## map

```
-map 0             # 所有流
-map 0:a           # 所有音频流
-map 0 -map -0:a:1 # 除第二个音频流
```

```
ffmpeg -i INPUT -map 0 -map -0:a:1 OUPUT
```

# 编码

## 视频

```
-vn              # 禁用视频
-c:v h264_nvenc  # 视频编码 GPU
-c:v libx264     # 视频编码 CPU
-c:v copy        # 视频编码复制
-pix_fmt yuv420p # 像素格式
```

## 音频

```
-c:a acc  # 音频编码（acc）
-c:v copy # 音频编码复制
-an       # 禁用音频
-ab 128k  # 音频比特率（128k）
-ac 2     # 音频声道
-ar 44100 # 音频采样率
```

# 编码器预设

```
-preset medium
```

## 码率模式

### 恒定量化器模式

```
-qp 0
```

```
ffmpeg -i input -vcodec libx264 -preset ultrafast -qp 0 output.mkv # 无损压缩快速编码
ffmpeg -i input -vcodec libx264 -preset veryslow -qp 0 output.mkv  # 无损压缩高压缩比
```

### 恒定速率因子模式（23）

```
-crf <0-51>
```

### 固定目标码率模式

```
-b:v 4000k       # 固定目标码率模式
-minrate 4000k   # 最小
-maxrate 4000k   # 最大
-bufsize 2000k   # 缓冲区大小
```

```
ffmpeg -i input -vcodec libx264 -preset veryslow -b:v 4000k -minrate 4000k -maxrate 4000k -bufsize 2000k output
```

# 剪辑

```
-ss 00:10:00               # 00:10:00 - end
-to 00:00:10               # 00:00:00 - 00:00:10
-ss 00:01:00 -to 010:01:10 # 00:01:00 - 00:01:10
-t 10                      # 00:00:00 - 00:00:10
-ss 00:01:00 -t 20         # 00:01:00 - 00:01:20
```

```
ffmpeg -i INPUT -ss 00:01:00 -t 20 OUTPUT
```
